schema: '2.0'
stages:
  extract_dataset:
    cmd: python ./src/data/extract_dataset.py
    deps:
    - path: ./data/raw/zipped
      hash: md5
      md5: 2ac9e57fc0bc2d2a1a610a695529d479.dir
      size: 87295035
      nfiles: 2
    - path: ./src/data/extract_dataset.py
      hash: md5
      md5: 24f6687ca92d5922f222bd078e285c5e
      size: 1633
    outs:
    - path: ./data/raw/extracted
      hash: md5
      md5: 07dcb976ec534725901d50758a399273.dir
      size: 271383386
      nfiles: 2
  make_dataset:
    cmd: python ./src/data/make_dataset.py train.csv
    deps:
    - path: ./data/raw/extracted/train.csv
      hash: md5
      md5: e59c291a4b1c640f1dab33b89daa22e1
      size: 200589097
    - path: ./src/data/make_dataset.py
      hash: md5
      md5: a51d8af28054b6aa34063e8655fea4cb
      size: 3975
    params:
      params.yaml:
        make_dataset.random_state: 30
        make_dataset.test_size: 0.1
    outs:
    - path: ./data/interim/
      hash: md5
      md5: 7f670a515defe82553d40117c288d0a0.dir
      size: 195532592
      nfiles: 2
  modify_features:
    cmd: python ./src/features/modify_features.py data/interim/train.csv data/interim/val.csv
      data/raw/extracted/test.csv
    deps:
    - path: ./data/interim/train.csv
      hash: md5
      md5: e25e5b87df39b21af60784835bdeb1c4
      size: 175979754
    - path: ./data/interim/val.csv
      hash: md5
      md5: ab4d5d49f0c0acf9bb71b470dced9de4
      size: 19552838
    - path: ./data/raw/extracted/test.csv
      hash: md5
      md5: 0686e4fc98617485dba9fdbabbf1c48d
      size: 70794289
    - path: ./src/features/modify_features.py
      hash: md5
      md5: e149b9d5965682388bab513da9d91ea0
      size: 8826
    outs:
    - path: ./data/processed/transformations
      hash: md5
      md5: bcb8f230135360ad5a3b749d67d4da6c.dir
      size: 206183587
      nfiles: 3
  build_features:
    cmd: python ./src/features/build_features.py data/processed/transformations/train.csv
      data/processed/transformations/val.csv data/processed/transformations/test.csv
    deps:
    - path: ./data/processed/transformations/test.csv
      hash: md5
      md5: 9363567ba36affc35fced581251496bc
      size: 55763801
    - path: ./data/processed/transformations/train.csv
      hash: md5
      md5: 20239409f81063e4965f67fab2a5c8bc
      size: 135373878
    - path: ./data/processed/transformations/val.csv
      hash: md5
      md5: 036018a36a77a89f985e8f99250b6081
      size: 15045908
    - path: ./src/features/build_features.py
      hash: md5
      md5: 74641fe4e6a94c5529ce82b631aec3a2
      size: 2186
    outs:
    - path: ./data/processed/build-features
      hash: md5
      md5: 483998e69397390511a5c266ce57a077.dir
      size: 328946482
      nfiles: 3
  data_preprocessing:
    cmd: python ./src/features/data_preprocessing.py train.csv val.csv test.csv
    deps:
    - path: ./data/processed/build-features/test.csv
      hash: md5
      md5: be704014be8cb7eb7f88a241c8fc3071
      size: 92630735
    - path: ./data/processed/build-features/train.csv
      hash: md5
      md5: 88e5fd6a9cf2c3f1eb0ab285e2792f12
      size: 212678166
    - path: ./data/processed/build-features/val.csv
      hash: md5
      md5: fb2c29ab476932dc8746108f0b29597e
      size: 23637581
    - path: ./src/features/data_preprocessing.py
      hash: md5
      md5: 910ed86b4e3c1f75a3c3dfb60753c936
      size: 7253
    params:
      params.yaml:
        data_preprocessing.percentiles:
        - 0.002
        - 0.998
    outs:
    - path: ./data/processed/final
      hash: md5
      md5: bc127befe7671c39410b454e424c8178.dir
      size: 349489751
      nfiles: 3
    - path: ./models/transformers
      hash: md5
      md5: 3ebd6f09d06ab0a98ba6f1edae85a60c.dir
      size: 6399
      nfiles: 3
  train_model:
    cmd: python ./src/models/train_model.py data/processed/final/train.csv
    deps:
    - path: ./data/processed/final/train.csv
      hash: md5
      md5: 91852d465266a77b227b575ccd885959
      size: 227804194
    - path: ./src/models/train_model.py
      hash: md5
      md5: 5a92b041c9f3d9dc650918a4fcc087b2
      size: 2056
    params:
      params.yaml:
        train_model.random_forest_regressor.max_depth: 6
        train_model.random_forest_regressor.n_estimators: 50
        train_model.random_forest_regressor.n_jobs: -1
        train_model.random_forest_regressor.verbose: 2
    outs:
    - path: ./models/models
      hash: md5
      md5: 15b8a71e5df37e9aad26e4533209bd03.dir
      size: 830583
      nfiles: 4
  predict_model:
    cmd: python ./src/models/predict_model.py train.csv val.csv
    deps:
    - path: ./data/processed/final/val.csv
      hash: md5
      md5: 869b39e06464b15eac8bbd6a39121594
      size: 25315428
    - path: ./models/models
      hash: md5
      md5: 15b8a71e5df37e9aad26e4533209bd03.dir
      size: 830583
      nfiles: 4
    - path: ./src/models/predict_model.py
      hash: md5
      md5: af0b41aaea689a865f98d3164e5aa79a
      size: 2181
    outs:
    - path: metrics.json
      hash: md5
      md5: 031b8b33b000faa993f5bb9828f9fd3e
      size: 396
  visualize:
    cmd: python src/visualization/visualize.py
    deps:
    - path: metrics.json
      hash: md5
      md5: 031b8b33b000faa993f5bb9828f9fd3e
      size: 396
    - path: src/visualization/visualize.py
      hash: md5
      md5: f4f957d868b4c15e1f2ea2b640beff7d
      size: 1540
    outs:
    - path: src/visualization/plots/bar_plot.png
      hash: md5
      md5: 806de7cbac08805a062f43a66d0e1294
      size: 33928
